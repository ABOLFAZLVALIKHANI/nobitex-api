---
title: موارد قدیمی API
lang: fa
toc_footers:
  - <a href='/'>مستندات API نوبیتکس</a>
  - <a href='/changelog/'>سابقه تغییرات API</a>
  - <a href='/terms/'>شرایط استفاده از API</a>
  - <a href='https://nobitex.ir/'>سایت نوبیتکس</a>
---

# موارد قدیمی API
برخی از APIها به دلیل تغییرات ساختاری یا کارکردی، قدیمی و deprecated محسوب می‌شوند و نباید دیگر از آن‌ها استفاده شود. این موارد صرفاً جهت ثبت در ادامه خواهند آمد، ولی ممکن است در حال حاضر یا هر یک از نسخه‌های آتی نوبیتکس این APIها غیرفعال شوند یا دیگر پاسخگو نباشند.

##  کد دعوت پیش‌فرض

```shell
curl 'https://api.nobitex.ir/users/get-referral-code' \
  -H "Authorization: Token yourTOKENhereHEX0000000000"
```

```plaintext
http POST https://api.nobitex.ir/users/get-referral-code \
```

> در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:

```json
{
    "status": "ok",
    "referredUsersCount": 0,
    "referralCode": "84440",
    "referralFeeTotalCount": 0,
    "referralFeeTotal": 0
}
```

برای دریافت کد دعوت پیش‌فرض از این نوع درخواست استفاده نمایید:

- آدرس : `GET /users/get-referral-code`



##  لیست سفارشـات

```shell
curl 'https://api.nobitex.ir/v2/orderbook'
     -X POST -H "content-type: application/json"
     --data '{"symbol": "USDTIRT"}'
```

```plaintext
http POST https://api.nobitex.ir/v2/orderbook \
  symbol=USDTIRT
```

> در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:

```json
{
    "status": "ok",
    "bids": [
        [
            "1476091000",
            "1.016"
        ],
        [
            "1479700000",
            "0.2561"
        ]
    ],
    "asks": [
        [
            "1470001120",
            "0.126571"
        ],
        [
            "1470000000",
            "0.818994"
        ]
    ]
}
```

برای دریافت لیست سفارشات از این نوع درخواست استفاده نمایید:

- آدرس : `POST /v2/orderbook`


##لیست معامـلات

```shell
curl 'https://api.nobitex.ir/v2/trades'
     -X POST -H "content-type: application/json"
     --data '{"symbol": "USDTIRT"}'
```

```plaintext
http POST https://api.nobitex.ir/v2/trades \
  symbol=USDTIRT
```

> در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:

```json
{
    "status": "ok",
    "trades": [
        {
            "time": 1588689375067,
            "price": "1470000110",
            "volume": "0",
            "type": "sell"
        },
        {
            "time": 1588689360464,
            "price": "1470000110",
            "volume": "0.002",
            "type": "buy"
        }
    ]
}
```

برای دریافت لیست معاملات از این نوع درخواست استفاده نمایید:

- آدرس : `POST /v2/trades `

## آمار OHLC بازار نوبیتکس

```shell
curl 'https://api.nobitex.ir/market/udf/history?symbol=BTCIRT&resolution=D&from=1560120967&to=1562230967'
```

```plaintext
http GET https://api.nobitex.ir/market/udf/history?symbol=BTCIRT&resolution=D&from=1560120967&to=1562230967
```

> در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:

```json
{
  "s": "ok",
  "t": [
    1562182200
  ],
  "c": [
    "157000000.0000000000"
  ],
  "o": [
    "150551000.0000000000"
  ],
  "h": [
    "161869500.0000000000"
  ],
  "l": [
    "150551000.0000000000"
  ],
  "v": [
    "9.8592626506"
  ]
}
```



برای توضیحات بیشتر در مورد  OHLC به [این لینک](https://en.wikipedia.org/wiki/Open-high-low-close_chart) مراجعه کنید.<br><br>
برای دریافت  آمار OHLC نوبیتکس از این نوع درخواست استفاده نمایید:

- آدرس : `GET /market/udf/history`

- پارامترها :

| پارامتر    | نوع    | پیش‌فرض | توضیحات             | نمونه        |
|------------|--------|---------|---------------------|--------------|
| symbol     | string | الزامی  | جفت ارز             | `BTCIRT`     |
| resolution | string | الزامی  | بازه زمانی هر خروجی | `D`          |
| from       | int    | الزامی  | زمان ابتدای بازه    | `1562120967` |
| to         | int    | الزامی  | زمان پایان بازه     | `1562230967` |

- پارامتر Resolution  بازه زمانی  کندل‌های خروجی می‌باشد و مقدار آن می‌تواند یکی از مقادیر زیر باشد:


| پارامتر | توضیح |
|---------|-------|
| یک ساعت | `60`  |
| یک روز  | `D`   |

<aside class="notice">
مقادیر from و to زمان شروع و پایان جست‌وجو را مشخص میکند. برای مثال اگر شما میخواهید بازه 4 ساعته از تاریخ 2019/2/9 11:39:41 را به خروجی های 1 ساعته دریافت کنید،مقادیر شما باید به این صورت باشد:
from: 1567424381
to: 1567395581
resolution: 60
</aside>

<aside class="notice">
در صورت ورودی اشتباه برای resolution پاسخ به این صورت خواهد بود:
`{
   "s": "error",
   "errmsg": "Invalid resolution!"
 }
 `
</aside>



- پاسخ سرور
  در هر بازه زمانی، بسته به resolution انتخابی، تعداد مقادیر برگشتی متفاوت میباشد. برای مثال اگر شما اختلاف بازه زمانی خود را 7 روز و resolution را مقدار D یعنی 1 روز انتخاب کنید، 7 پاسخ به شما برگشت داده می‌شود.
  هر کدام از این پاسخ‌ها در واقع یک candle هستند.
  هر candle، مقادیر زیر را دارد:

| پارامتر | توضیح                 | نوع    | نمونه                  |
|---------|-----------------------|--------|------------------------|
| `s`     | وضعیت پاسخ            | string | `ok`                   |
| `t`     | زمان                  | float  | `1562182200`           |
| `c`     | مقدار انتهای بازه     | string | `157000000.0000000000` |
| `o`     | مقدار ابندای بازه     | string | `150551000.0000000000` |
| `h`     | بالاترین مقدار بازه   | string | `161869500.0000000000` |
| `l`     | پایین ترین مقدار بازه | string | `150551000.0000000000` |
| `v`     | حجم بازه              | array  | `["9.8592626506"]`     |

پارامتر o (open) مقدار شروع بازه (در مثال ما بازه 1 روزه) را نشان می‌دهد. یعنی این بازه با مقدار 150551000.0000000000 شروع شده است.

پارامتر c  (close) مقدار پایان بازه را نشان می‌دهد. یعنی این بازه با مقدار 157000000.0000000000 به پایان رسیده‌است.

پارامتر h(high) است. بالاترین مقدار بازه را نشان می‌دهد. یعنی بالاترین مقدار این بازه  "150551000.0000000000"

پارامتر l  (low) پایین‌ ترین مقدار بازه را نشان می‌دهد. پایین ترین مقدار این بازه 150551000.000000 می‌باشد.

پارامتر v  (volume) حجم بازه بازه را نشان می‌دهد. حجم این بازه 9.8592626506 می‌باشد.
